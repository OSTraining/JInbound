-- MySQL Script generated by MySQL Workbench
-- Fri Mar 23 11:25:47 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='';

-- -----------------------------------------------------
-- Schema jinbound
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Table `#__jinbound_campaigns`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_campaigns` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `asset_id` INT(11) NOT NULL COMMENT 'Key for assets table',
  `name` VARCHAR(255) NOT NULL COMMENT 'name of this record',
  `label` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'label type',
  `greedy` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'this campaign wants the contacts to itself',
  `conversion_url` TEXT NOT NULL DEFAULT '' COMMENT 'query params that denote a successful conversion',
  `published` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'publication status of record - 0 is Unpublished, 1 is Published, -2 is Trashed',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'Date and Time record was checked out',
  `params` TEXT NULL COMMENT 'JSON encoded custom parameters',
  PRIMARY KEY (`id`),
  INDEX `fk_assets_idx` (`asset_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_contacts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_contacts` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `user_id` INT(11) NOT NULL DEFAULT '0' COMMENT 'FK to #__users table',
  `core_contact_id` INT(11) NOT NULL DEFAULT '0' COMMENT 'FK to #__contact_details table',
  `asset_id` INT(11) NOT NULL COMMENT 'FK to #__assets table',
  `cookie` VARCHAR(255) NULL COMMENT 'Cookie value',
  `alias` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Slug for URL',
  `first_name` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'First name of Contact',
  `last_name` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Last name of Contact',
  `company` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Company name of Contact',
  `website` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Company name of Contact',
  `email` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Email of Contact',
  `address` TEXT NOT NULL COMMENT 'Address of Contact',
  `suburb` VARCHAR(100) NOT NULL DEFAULT '' COMMENT 'City/suburb of Contact',
  `state` VARCHAR(100) NOT NULL DEFAULT '' COMMENT 'State of Contact',
  `country` VARCHAR(100) NOT NULL DEFAULT '' COMMENT 'Country of Contact',
  `postcode` VARCHAR(100) NOT NULL DEFAULT '' COMMENT 'Postal code of Contact',
  `telephone` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Telephone number of Contact',
  `published` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'publication status of record - 0 is Unpublished, 1 is Published, -2 is Trashed',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'Date and Time record was checked out',
  PRIMARY KEY (`id`),
  INDEX `fk_users_idx` (`user_id` ASC),
  INDEX `fk_assets_idx` (`asset_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_contacts_campaigns`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_contacts_campaigns` (
  `contact_id` INT(11) NOT NULL DEFAULT '0' COMMENT 'FK to #__jinbound_contacts table',
  `campaign_id` INT(11) NOT NULL DEFAULT '0' COMMENT 'FK to #__jinbound_campaigns table',
  `enabled` TINYINT(1) NOT NULL DEFAULT '1' COMMENT 'enabled status, 1 = enabled, 0 = disabled',
  `added` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'when contact was added to campaign, in UTC',
  INDEX `fk_contacts_idx` (`contact_id` ASC),
  INDEX `fk_campaigns_idx` (`campaign_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_priorities`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_priorities` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `asset_id` INT(11) NOT NULL COMMENT 'Key for assets table',
  `name` VARCHAR(255) NOT NULL COMMENT 'name of this record',
  `description` MEDIUMTEXT NOT NULL COMMENT 'description of this record',
  `ordering` INT(11) NOT NULL DEFAULT '0' COMMENT 'Ordering column for priority level',
  `published` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'publication status of record - 0 is Unpublished, 1 is Published, -2 is Trashed',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'Date and Time record was checked out',
  PRIMARY KEY (`id`),
  INDEX `fk_assets` (`asset_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_contacts_priorities`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_contacts_priorities` (
  `priority_id` INT(11) NOT NULL COMMENT 'FK to #__jinbound_lead_statuses table',
  `campaign_id` INT(11) NOT NULL COMMENT 'FK to #__jinbound_campaigns table',
  `contact_id` INT(11) NOT NULL COMMENT 'FK to #__jinbound_contacts table',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  INDEX `fk_priorities_idx` (`priority_id` ASC),
  INDEX `fk_campaigns_idx` (`campaign_id` ASC),
  INDEX `fk_contacts_idx` (`contact_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_lead_statuses`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_lead_statuses` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `asset_id` INT(11) NOT NULL COMMENT 'Key for assets table',
  `name` VARCHAR(255) NOT NULL COMMENT 'name of this record',
  `description` MEDIUMTEXT NOT NULL COMMENT 'description of this record',
  `ordering` INT(11) NOT NULL DEFAULT '0' COMMENT 'Ordering column for priority level',
  `default` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'Default status',
  `active` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'Active statuses count towards leads, inactive do not',
  `final` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'Final status',
  `published` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'publication status of record - 0 is Unpublished, 1 is Published, -2 is Trashed',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'Date and Time record was checked out',
  PRIMARY KEY (`id`),
  INDEX `fk_assets_idx` (`asset_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_contacts_statuses`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_contacts_statuses` (
  `status_id` INT(11) NOT NULL COMMENT 'FK to #__jinbound_lead_statuses table',
  `campaign_id` INT(11) NOT NULL COMMENT 'FK to #__jinbound_campaigns table',
  `contact_id` INT(11) NOT NULL COMMENT 'FK to #__jinbound_contacts table',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  INDEX `fk_statuses_idx` (`status_id` ASC),
  INDEX `fk_campaigns_idx` (`campaign_id` ASC),
  INDEX `fk_contacts_idx` (`contact_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_forms`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_forms` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `asset_id` INT(10) UNSIGNED NOT NULL DEFAULT '0' COMMENT 'FK to the #__assets table.',
  `title` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Form Title',
  `created` DATETIME NULL COMMENT 'when form was created',
  `created_by` INT(11) NULL COMMENT 'User id of form creator',
  `modified` DATETIME NULL COMMENT 'when form was last modified',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `published` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'Publication status',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'Date and Time form was checked out',
  `default` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'Determines if this is the default custom form',
  PRIMARY KEY (`id`),
  INDEX `fk_assets_idx` (`asset_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_pages`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_pages` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `asset_id` INT(11) NOT NULL COMMENT 'Key for assets table',
  `layout` VARCHAR(1) NOT NULL DEFAULT 'A' COMMENT 'Layout type - 0 for custom, or A-D',
  `heading` VARCHAR(255) NOT NULL,
  `subheading` VARCHAR(255) NOT NULL,
  `socialmedia` TINYINT(1) NOT NULL,
  `maintext` BLOB NOT NULL,
  `sidebartext` BLOB NOT NULL,
  `alias` VARCHAR(255) NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `image` VARCHAR(255) NOT NULL,
  `imagealttext` VARCHAR(255) NOT NULL,
  `image_size_large_width` VARCHAR(50) NOT NULL DEFAULT '',
  `image_size_large_height` VARCHAR(50) NOT NULL DEFAULT '',
  `image_size_medium_width` VARCHAR(50) NOT NULL DEFAULT '',
  `image_size_medium_height` VARCHAR(50) NOT NULL DEFAULT '',
  `image_size_small_width` VARCHAR(50) NOT NULL DEFAULT '',
  `image_size_small_height` VARCHAR(50) NOT NULL DEFAULT '',
  `category` VARCHAR(255) NOT NULL,
  `metatitle` VARCHAR(55) NOT NULL,
  `metadescription` VARCHAR(155) NOT NULL,
  `formid` INT(11) NOT NULL DEFAULT '0',
  `formname` VARCHAR(255) NOT NULL,
  `formbuilder` BLOB NOT NULL,
  `campaign` INT(11) NULL,
  `converts_on_another_form` VARCHAR(25) NOT NULL,
  `converts_on_same_campaign` VARCHAR(25) NOT NULL,
  `submit_text` VARCHAR(255) NOT NULL,
  `notify_form_submits` VARCHAR(255) NOT NULL,
  `notification_email` VARCHAR(255) NOT NULL,
  `after_submit_sendto` VARCHAR(20) NOT NULL,
  `menu_item` VARCHAR(10) NOT NULL,
  `send_to_url` VARCHAR(255) NOT NULL,
  `sendto_message` TEXT NOT NULL,
  `template` TEXT NOT NULL,
  `css` TEXT NOT NULL,
  `ga` TINYINT(1) NOT NULL DEFAULT '0',
  `ga_code` VARCHAR(255) NOT NULL DEFAULT '',
  `hits` INT(11) NOT NULL DEFAULT '0' COMMENT 'number of views for this record',
  `published` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'publication status of record - 0 is Unpublished, 1 is Published, -2 is Trashed',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'Date and Time record was checked out',
  PRIMARY KEY (`id`),
  INDEX `fk_assets_idx` (`asset_id` ASC),
  INDEX `fk_forms_idx` (`formid` ASC),
  INDEX `fk_campaigns_idx` (`campaign` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_conversions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_conversions` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `page_id` INT(11) NOT NULL COMMENT 'FK to #__jinbound_pages table',
  `contact_id` INT(11) NOT NULL COMMENT 'FK to #__jinbound_contacts table',
  `published` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'publication status of record - 0 is Unpublished, 1 is Published, -2 is Trashed',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'Date and Time record was checked out',
  `formdata` TEXT NULL COMMENT 'JSON encoded form data',
  PRIMARY KEY (`id`),
  INDEX `fk_pages_idx` (`page_id` ASC),
  INDEX `fk_contacts_idx` (`contact_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_emails`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_emails` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `asset_id` INT(11) NOT NULL COMMENT 'Key for assets table',
  `name` VARCHAR(255) NOT NULL COMMENT 'name of this record',
  `type` VARCHAR(255) NOT NULL DEFAULT 'campaign' COMMENT 'type of record',
  `campaign_id` INT(11) NOT NULL COMMENT 'Primary key of associated campaign',
  `layout` VARCHAR(1) NOT NULL DEFAULT 'A' COMMENT 'Layout type - 0 for custom, or A-D',
  `fromname` VARCHAR(255) NOT NULL,
  `fromemail` VARCHAR(255) NOT NULL,
  `sendafter` INT(4) NOT NULL,
  `subject` VARCHAR(255) NOT NULL,
  `htmlbody` BLOB NOT NULL,
  `plainbody` BLOB NOT NULL,
  `params` BLOB NOT NULL,
  `published` TINYINT(1) NOT NULL DEFAULT '0' COMMENT 'publication status of record - 0 is Unpublished, 1 is Published, -2 is Trashed',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'Date and Time record was checked out',
  PRIMARY KEY (`id`),
  INDEX `fk_assets` (`asset_id` ASC),
  INDEX `fk_campaigns_idx` (`campaign_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_emails_versions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_emails_versions` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `email_id` INT(11) NOT NULL COMMENT 'FK to #__jinbound_emails.id',
  `subject` VARCHAR(255) NULL,
  `htmlbody` BLOB NULL,
  `plainbody` BLOB NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_emails_idx` (`email_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_emails_records`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_emails_records` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `asset_id` INT(11) NOT NULL COMMENT 'Key for assets table',
  `email_id` INT(11) NOT NULL COMMENT 'Primary Key of associated Email',
  `version_id` INT(11) NOT NULL DEFAULT '0' COMMENT 'Primary Key of associated Email version',
  `lead_id` INT(11) NOT NULL COMMENT 'Primary key of associated Lead',
  `sent` DATETIME NULL COMMENT 'when record was created, in UTC',
  PRIMARY KEY (`id`),
  INDEX `fk_assets` (`asset_id` ASC),
  INDEX `fk_emails_idx` (`email_id` ASC),
  INDEX `fk_versions_idx` (`version_id` ASC),
  INDEX `fk_contacts_idx` (`lead_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_fields`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_fields` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `asset_id` INT(10) UNSIGNED NOT NULL DEFAULT '0' COMMENT 'FK to the #__assets table.',
  `name` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Field name attribute',
  `title` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Field Title (and label)',
  `type` VARCHAR(255) NOT NULL DEFAULT 'text' COMMENT 'Type of field, which must match a corresponding class/trigger',
  `description` TEXT NOT NULL DEFAULT '' COMMENT 'Description of field displayed to the end user',
  `default` VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'Default value of the field',
  `params` TEXT NULL COMMENT 'Various parameters for field - options, html attributes, etc',
  `created` DATETIME NULL COMMENT 'when field was created',
  `created_by` INT(11) NULL COMMENT 'User id of field creator',
  `modified` DATETIME NULL COMMENT 'when field was last modified',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `published` TINYINT(1) NULL COMMENT 'Publication status',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'when field was checked out',
  PRIMARY KEY (`id`),
  INDEX `fk_assets_idx` (`asset_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_form_fields`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_form_fields` (
  `form_id` INT(11) NOT NULL COMMENT 'Primary key of form',
  `field_id` INT(11) NOT NULL COMMENT 'Primary key of field',
  `ordering` INT(11) NOT NULL DEFAULT '0' COMMENT 'ordering of fields',
  INDEX `fk_forms_idx` (`form_id` ASC),
  INDEX `fk_fields_idx` (`field_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_landing_pages_hits`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_landing_pages_hits` (
  `day` DATE NOT NULL,
  `page_id` INT(11) NOT NULL,
  `hits` INT(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`day`, `page_id`),
  INDEX `fk_pages_idx` (`page_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_notes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_notes` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `asset_id` INT(11) NOT NULL COMMENT 'Key for assets table',
  `lead_id` INT(11) NOT NULL COMMENT 'Key for leads table',
  `text` MEDIUMTEXT NOT NULL COMMENT 'note text',
  `published` TINYINT(1) NOT NULL DEFAULT '1' COMMENT 'publication status of record - 0 is Unpublished, 1 is Published, -2 is Trashed',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  `created_by` INT(11) NULL COMMENT 'User id of record creator',
  `modified` DATETIME NULL COMMENT 'when record was last modified in UTC',
  `modified_by` INT(11) NULL COMMENT 'User id of last modifier',
  `checked_out` INT(11) NULL COMMENT 'Locking column to prevent simultaneous updates',
  `checked_out_time` DATETIME NULL COMMENT 'Date and Time record was checked out',
  PRIMARY KEY (`id`),
  INDEX `fk_assets_idx` (`asset_id` ASC),
  INDEX `fk_contacts_idx` (`lead_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_reports_emails`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_reports_emails` (
  `email` TEXT NOT NULL COMMENT 'Email the reports were sent to',
  `email_id` INT(11) NOT NULL DEFAULT '0' COMMENT 'References #__jinbound_emails.id',
  `created` DATETIME NULL COMMENT 'when record was created, in UTC',
  INDEX `fk_emails_idx` (`email_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_subscriptions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_subscriptions` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `contact_id` INT(11) NOT NULL COMMENT 'FK to #__contact_details.id',
  `enabled` INT(1) NOT NULL DEFAULT '1' COMMENT 'If 0 emails will not be sent',
  PRIMARY KEY (`id`),
  INDEX `fk_contacts_idx` (`contact_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_tracks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_tracks` (
  `id` VARCHAR(128) NOT NULL COMMENT 'Primary Key, microtime + ip + md5(session id)',
  `cookie` VARCHAR(255) NULL COMMENT 'Cookie value for this track',
  `detected_user_id` INT(11) NOT NULL DEFAULT '0' COMMENT 'FK to #__users table',
  `current_user_id` INT(11) NOT NULL DEFAULT '0' COMMENT 'FK to #__users table',
  `user_agent` TEXT NULL COMMENT 'Browser User Agent',
  `created` DATETIME NULL COMMENT 'Date this request was made',
  `ip` VARCHAR(64) NULL COMMENT 'IP address as determined by PHP, either ipv4 or ipv6',
  `session_id` VARCHAR(255) NULL COMMENT 'Session ID as determined by PHP',
  `type` ENUM('GET', 'POST', 'HEAD', 'PUT') NULL COMMENT 'Request type',
  `url` TEXT NULL COMMENT 'URL of the request',
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `#__jinbound_users_tracks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `#__jinbound_users_tracks` (
  `user_id` INT(11) NOT NULL DEFAULT '0' COMMENT 'FK to #__users table',
  `cookie` VARCHAR(255) NULL COMMENT 'Cookie value',
  INDEX `fk_users` (`user_id` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
