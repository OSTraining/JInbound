(function(a){a.fn.permissions=function(){a(this).attr("onchange",null).on("change",function(d){var c=document.getElementById("icon_"+this.id);c.removeAttribute("class");c.setAttribute("style","background: url(../media/system/images/modal/spinner.gif); display: inline-block; width: 16px; height: 16px");var f=this.id.replace("rules_","");var b=f.lastIndexOf("_");var e={option:"com_jinbound",task:"saverules",comp:"com_jinbound."+a(this.form.asset).val(),action:f.substring(0,b),rule:f.substring(b+1),value:a(this).val(),title:a(this).attr("title")};a.post(this.form.action,e).fail(function(h,i,g){c.removeAttribute("style");Joomla.renderMessages(Joomla.ajaxErrorsMessages(h,i,g));window.scrollTo(0,0);c.setAttribute("class","icon-cancel")}).done(function(g){c.removeAttribute("style");if(g.data){if(g.data.result===true){c.setAttribute("class","icon-save");console.log(a(d.target));a(d.target).parents().next("td").find("span").removeClass().addClass(g.data["class"]).html(g.data.text)}}if(typeof g.messages==="object"&&g.messages!==null){Joomla.renderMessages(g.messages);if(g.data&&g.data.result===true){c.setAttribute("class","icon-save")}else{c.setAttribute("class","icon-cancel")}window.scrollTo(0,0)}})})}})(jQuery);